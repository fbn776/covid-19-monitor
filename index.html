<html>
 <head>
   <meta name="viewport" content="width= device-width, initial-scale=1.0"> 
<style>
*{
  	box-sizing:border-box;
}
*:focus {
  	outline:none;  	
}
body {
	margin:0;
	background-color:rgb(230,230,230);
	overflow:hidden;
}
.loading {
	overflow:scroll;
	z-index:100;
	background-color:white;
	//opacity:0;
	//visibility:hidden;
	//transform:translateY(200px) scale(0.8);
	transition:0.3s;
	width:100%;
	display:flex;
	justify-content:center;
	align-items:center;
}
.sk-chase {
	width:80px;
	height:80px;
	position:relative;
	animation:sk-chase 2.5s infinite linear both;
}

.sk-chase-dot {
	width: 100%;
	height: 100%;
	position: absolute;
	left: 0;
	top: 0; 
	animation: sk-chase-dot 2.0s infinite ease-in-out both; 
}

.sk-chase-dot:before {
	content: '';
	display: block;
	width: 25%;
	height: 25%;
	background-color:#4FC3F7;
	border-radius: 100%;
	animation: sk-chase-dot-before 2.0s infinite ease-in-out both; 
}

.sk-chase-dot:nth-child(1) { animation-delay: -1.1s; }
.sk-chase-dot:nth-child(2) { animation-delay: -1.0s; }
.sk-chase-dot:nth-child(3) { animation-delay: -0.9s; }
.sk-chase-dot:nth-child(4) { animation-delay: -0.8s; }
.sk-chase-dot:nth-child(5) { animation-delay: -0.7s; }
.sk-chase-dot:nth-child(6) { animation-delay: -0.6s; }
.sk-chase-dot:nth-child(1):before { animation-delay: -1.1s; }
.sk-chase-dot:nth-child(2):before { animation-delay: -1.0s; }
.sk-chase-dot:nth-child(3):before { animation-delay: -0.9s; }
.sk-chase-dot:nth-child(4):before { animation-delay: -0.8s; }
.sk-chase-dot:nth-child(5):before { animation-delay: -0.7s; }
.sk-chase-dot:nth-child(6):before { animation-delay: -0.6s; }

@keyframes sk-chase {
	100% { transform: rotate(360deg); } 
}

@keyframes sk-chase-dot {
	80%, 100% { transform: rotate(360deg); } 
}

@keyframes sk-chase-dot-before {
	50% {
		transform: scale(0.4); 
	} 100%, 0% {
		transform: scale(1.0); 
	} 
}
.holder {
	position:relative;
}
</style>
<link rel="stylesheet" href="lib/lib.css">
<link rel="stylesheet" href="style/style.css">
<script src="lib/lib.js"></script>
<script src="lib/chart/Chart.min.js"></script>
</head>
<body>
<div class="loading page">
	<div class="holder">
			<div class="sk-chase">
			<div class="sk-chase-dot"></div>
			<div class="sk-chase-dot"></div>
			<div class="sk-chase-dot"></div>
			<div class="sk-chase-dot"></div>
			<div class="sk-chase-dot"></div>
			<div class="sk-chase-dot"></div>
		</div>	
	</div>
</div>
<div class="body page">
	<div class="covid-main">
		<div class="img-bg-cont">
			<img src="main_ic/virus.png" class="img-bg" id="bg00">
			<img src="main_ic/virus.png" class="img-bg" id="bg01">
			<img src="main_ic/virus.png" class="img-bg" id="bg02">
			<img src="main_ic/virus.png" class="img-bg" id="bg03">
		</div>
		<div class="main-non">
			<div class="tt">
				COVID 19
			</div>
			<div class="list">
				<div class="indv">
					<li>Coronavirus disease 2019 is an infectious disease caused by SARS-CoV-2</li>
				</div>
				<div class="indv">
					<li>It was first identified in December 2019 in Wuhan, the capital of China's Hubei province</li>
				</div>
				<div class="indv">
					<li>Its symptoms are fever, cough, shortness of breath, loss of smell</li>
				</div>
				<div class="indv">
					<li>The virus is primarily spread between people during close contact,often via small droplets produced by coughing,sneezing, talking, or breathing</li>
				</div>
			</div>
			<div class="btn-cont">
				<button class="more" onclick="nextPageFromBody()">More</button>
			</div>
		</div>
		<div class="bottom-link-bar">
			<a href="https://twitter.com/fbn776"><img src="ic/twitter.png" class="home-link"></a>
			<a href="https://fbn-apps.000webhostapp.com/"><img src="ic/internet.png" class="home-link"></a>
			<a href="details.html"><img src="ic/details.png" class="home-link"></a>
		</div>
		<div class="top-link-bar">
			<a href="https://github.com/fbn776"><img src="ic/github.png" class="home-link"></a>
			<a href="source.html"><img src="ic/source.png" class="home-link"></a>
			<a href="credits.html"><img src="ic/credits.png" class="home-link"></a>
		</div>
	</div>
</div>

<div class="page-two page">
	<div class="header">
		<img src="ic/arrowLeft.png" onclick="prevFromTwo()" class="return">
		World Data
		<div class="scroll-down" onclick="scrollDown()">
			<img src="ic/scroll.png" class="indv-scroll">
		</div>
	</div>
	<div class="world-data-cont"></div><br>
	<div class="next-page-india" onclick="nextPageFromWorld()">
		<div class="india-cont" id="left">
			<img src="ic/india.png" class="btn-img">
		</div>
			India's Data
		<div class="india-cont" id="right">
			<img src="ic/goForward.png" class="btn-img">		
		</div>
	</div>
</div>

<div class="page-three page">
	<div class="header">
		<img src="ic/arrowLeft.png" onclick="prevFromThree()" class="return">
		India's Data
		<div class="scroll-down" onclick="scrollDownToState()">
			<img src="ic/scroll.png" class="indv-scroll">
		</div>
	</div>
		<div class="india-data-cont"></div><br>
	<div class="next-page-state" onclick="nextPageFromIndia()">
		<div class="india-cont" id="left">
			<img src="ic/nation.png" class="btn-img">
		</div>
			Indian States Data
			<div class="india-cont" id="right">
			<img src="ic/goForward.png" class="btn-img">		
		</div>
	</div>
</div>
<div class="page-four page">
	<div class="header">
		<img src="ic/arrowLeft.png" onclick="prevFromFour()" class="return">
		Indian States
	</div>
		<div class="state-data-cont"></div><br>
</div>

<script>
var iElm=document.getElementsByClassName("loading-elm");
for(let i=0;i<iElm.length;i++){
	iElm[i].style.animationDelay=i/10+"s";
}
var body={
	a:s(".body"),
	b:s(".page-two"),
	c:s(".page-three"),
	d:s(".page-four"),
	e:s(".loading"),
}

var loadDone=[false,false,false];

var worldDataCont=s(".world-data-cont");
var indiaDataCont=s(".india-data-cont");
var indBtn=s(".next-page-india");
var stateBtn=s(".next-page-state");
var stateDataCont=s(".state-data-cont");

let worldData="https://corona.lmao.ninja/v2/all";
fetch(worldData).then(res=>res.json()).then((out) => {
	createWorldData(worldDataCont,"Cases",out.cases,"ic/locations.png");
	createWorldData(worldDataCont,"Recovered Cases",out.recovered,"ic/medicine.png");
	createWorldData(worldDataCont,"Tests Done",out.tests,"ic/medical.png");
	createWorldData(worldDataCont,"Total Deaths",out.deaths,"ic/virus.png");
	createWorldData(worldDataCont,"Recent Cases",out.todayCases,"ic/report.png");
	createWorldData(worldDataCont,"Recent Deaths",out.todayDeaths,"ic/death.png");
	createWorldData(worldDataCont,"Active Cases",out.active,"ic/file.png");
	createWorldData(worldDataCont,"Serious Cases",out.critical,"ic/ambulance.png");
	createWorldData(worldDataCont,"Affected Countries",out.affectedCountries,"ic/international.png");
	done(0);
}).catch(err=>{
	showAlert(err);
	setTimeout(()=>{
		showAlert("Refresh the page to try again");
	},2000);
});

let indianData="https://disease.sh/v2/countries/IN";
fetch(indianData).then(res=>res.json()).then((out) => {
	createWorldData(indiaDataCont,"Cases",out.cases,"ic/nation.png");
	createWorldData(indiaDataCont,"Recovered Cases",out.recovered,"ic/medicine.png");
	createWorldData(indiaDataCont,"Tests Done",out.tests,"ic/medical.png");
	createWorldData(indiaDataCont,"Total Deaths",out.deaths,"ic/virus.png");
	createWorldData(indiaDataCont,"Recent Cases",out.todayCases,"ic/report.png");
	createWorldData(indiaDataCont,"Recent Deaths",out.todayDeaths,"ic/death.png");
	createWorldData(indiaDataCont,"Active Cases",out.active,"ic/file.png");
	createWorldData(indiaDataCont,"Serious Cases",out.critical,"ic/ambulance.png");
	done(1);
}).catch(err=>{
	showAlert(err);
	setTimeout(()=>{
		showAlert("Refresh the page to try again");
	},2000);
});

let stateData="https://api.rootnet.in/covid19-in/stats/latest";
fetch(stateData).then(res=>res.json()).then((out) => {
	createState(stateDataCont,out);
	done(2);
}).catch(err=>{
	showAlert(err);
	setTimeout(()=>{
		showAlert("Refresh the page to try again");
	},2000);
});
function scrollDown(){
	scroll(indBtn);
}
function scrollDownToState(){
	scroll(stateBtn);
}
function nextPageFromBody(){
	body.a.style.transform="scale(1.1) translateY(-200px)";	
	body.a.style.opacity=0;
	setTimeout(()=>{
		body.a.style.visibility="hidden";
	},300);
	body.b.style.visibility="visible";
	body.b.style.opacity=1;
	body.b.style.transform="translateY(0px) scale(1)";
}
function prevFromTwo(){
	body.b.style.transform="scale(1.1) translateY(-200px)";	
	body.b.style.opacity=0;
	setTimeout(()=>{
		body.b.style.visibility="hidden";
	},300);
	body.a.style.visibility="visible";
	body.a.style.opacity=1;
	body.a.style.transform="translateY(0px) scale(1)";
}
function prevFromThree(){
	body.c.style.transform="scale(1.1) translateY(-200px)";	
	body.c.style.opacity=0;
	setTimeout(()=>{
		body.c.style.visibility="hidden";
	},300);
	body.b.style.visibility="visible";
	body.b.style.opacity=1;
	body.b.style.transform="translateY(0px) scale(1)";
}
function prevFromFour(){
	body.d.style.transform="scale(1.1) translateY(-200px)";	
	body.d.style.opacity=0;
	setTimeout(()=>{
		body.d.style.visibility="hidden";
	},300);
	body.c.style.visibility="visible";
	body.c.style.opacity=1;
	body.c.style.transform="translateY(0px) scale(1)";
}
function nextPageFromWorld(){
	body.b.style.transform="scale(1.1) translateY(-200px)";	
	body.b.style.opacity=0;
	setTimeout(()=>{
		body.b.style.visibility="hidden";
	},300);
	body.c.style.visibility="visible";
	body.c.style.opacity=1;
	body.c.style.transform="translateY(0px) scale(1)";
}
function nextPageFromIndia(){
	body.c.style.transform="scale(1.1) translateY(-200px)";	
	body.c.style.opacity=0;
	setTimeout(()=>{
		body.c.style.visibility="hidden";
	},300);
	body.d.style.visibility="visible";
	body.d.style.opacity=1;
	body.d.style.transform="translateY(0px) scale(1)";
}

function createState(a,d){
	for(let i=0;i<d.data.regional.length;i++){
		var reg=d.data.regional[i];
		var elm=document.createElement("div");
			a.appendChild(elm);
			elm.setAttribute("class","stateData");
		var sec=document.createElement("div");
			sec.setAttribute("class","stateDataMainCont");
			elm.appendChild(sec);
		
		var loc=reg.loc,
			total=reg.totalConfirmed,
			discharged=reg.discharged,
			deaths=reg.deaths,
			forgien=reg.confirmedCasesForeign;
			
		sec.innerHTML="<div class='stateName'>"+loc+"</div><div class='state-indv'><div class='head'>Cases</div><div class='head_val'>"+total+"</div></div><div class='state-indv'><div class='head'>discharged</div><div class='head_val'>"+discharged+"</div></div><div class='state-indv'><div class='head'>deaths</div><div class='head_val'>"+deaths+"</div></div><div class='state-indv'><div class='head'>Forgien</div><div class='head_val'>"+forgien+"</div>";
		var h=getCSS(elm,"height"),
			w=getCSS(elm,"width");
		var canCont=document.createElement("div");
			elm.appendChild(canCont)
			canCont.setAttribute("class","thisCanvas");
		var can=document.createElement("canvas");
			can.setAttribute("class","stateCanvas")
			canCont.appendChild(can);
			can.height=toInt(h);
			can.width=toInt(w)/2;

		let ctx=can.getContext("2d");
		var bg="rgba("+Math.random()*255+","+Math.random()*255+","+Math.random()*255+",0.4)";
		var data={
			labels:	["total","discharged","deaths","forgien"],
			datasets: [{
				data:[total,discharged,deaths,forgien],
				backgroundColor:bg,
			}]
		}
		var myRadarChart = new Chart(ctx, {
			type:'radar',
			data:data,
			options:{
				legend:{
					display:false,
				},
			}
		});
	}
}

function closeLoad(p){
	p.style.transform="scale(1.1) translateY(-200px)";	
	p.style.opacity=0;
	setTimeout(()=>{
		p.style.visibility="hidden";
	},300);
}

function done(a){
	if(a==0){
		loadDone[0]=true;
	}if(a==1){
		loadDone[1]=true;
	}if(a==2){
		loadDone[2]=true;
	}
	
	if(loadDone[0]==true && loadDone[1]==true && loadDone[2]==true){
		closeLoad(body.e);
		console.log("all done");
	}
}
</script>
 </body>
</html>